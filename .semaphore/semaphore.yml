version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: 'Job #1'
          commands:
            - checkout
            - 'mkdir -p ${HOME}/results'
            - 'docker run -v ${PWD}:/opt/robotframework/test:Z -v ${HOME}/results:/opt/robotframework/reports:Z -e ROBOT_OPTIONS=''--name SuiteName'' -e ROBOT_TESTS_DIR=/opt/robotframework/test/TestCases --user=1001:1001 ppodgorsek/robot-framework:latest'
            - 'ls -lah ${HOME}/results/'
      epilogue:
        always:
          commands:
            - 'ls -lah ${HOME}/results/'
            - 'test-results publish ${HOME}/results/output.xml'
      prologue:
        commands:
          - docker pull ppodgorsek/robot-framework
